#:import AttachmentCard uix.AttachmentCard
#:import dtstr utils.dtstr

<EntryCard>:
    md_bg_color: self.theme_cls.bg_dark[:3] + [0.5]  # if not self.excluded else self.theme_cls.error_color)[:3] + [0.5]
    orientation: "vertical"
    adaptive_height: True
    spacing: 0
    MDBoxLayout:
        size_hint: None, None
        size: root.width, dp(20)
        padding: dp(5)
        MDLabel:
            id: timestamp
            text: dtstr(root.timestamp)
            adaptive_height: True
            font_style: "Caption"
            pos_hint: {"top": 1}

#        MDCheckbox:
#            id: checkbox
#            size_hint: None, 0.9
#            width: dp(20)
#            font_size: sp(14)
#            on_active:
#                root.exclude()

    MDSeparator:

    MDLabel:
        padding: dp(10)
        text: root.content
        adaptive_height: True
        width: root.width
        font_size: sp(15)
        md_bg_color: self.theme_cls.bg_dark

    MDStackLayout:
        id: attachment_box
        orientation: "lr-tb"
        adaptive_height: True
        width: root.width
        pos_hint: {'center_y': 0.5}
        spacing: dp(5), dp(5)
        padding: dp(10), 0, dp(10), dp(5)
        md_bg_color: self.theme_cls.bg_dark

    MDSeparator:

    MDBoxLayout:
        size_hint: 1, None
        adaptive_height: True
        padding: dp(5), 0, dp(5), 0
        MDStackLayout:
            id: tag_box
            orientation: "lr-tb"
            adaptive_height: True
            pos_hint: {'center_y': 0.5}
            spacing: dp(5), dp(5)
            padding: 0, dp(5), 0, 0

        MDBoxLayout:
            id: option_box
            size_hint: None, None
            pos_hint: {"right": 1, 'center_y': 0.5}
            size: dp(90), dp(30)
            spacing: dp(2)
            MDIconButton:
                icon: "pencil"
                icon_size: sp(18)
                size_hint: 1, 1
                on_release: root.edit()
            MDIconButton:
                icon: "trash-can-outline"
                icon_size: sp(18)
                size_hint: 1, 1
                on_release: root.delete()
